/* ========================================
   INPUT FIELD UNIFIED STYLES
   Consistent Height, Width & Animations
   All Inputs Use: height 48px, width 100%, 16px padding
======================================== */

/* ===== UNIVERSAL INPUT CONSTANTS ===== */
:root {
  --input-height: 40px;
  --input-padding: var(--space-4);
  --input-padding-top-bottom: calc(var(--space-4) - 2px);
  --input-border-width: 2px;
  --input-border-radius: var(--radius-lg);
  --input-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===== BASE INPUT STYLES ===== */
input,
textarea,
select {
  font-family: var(--font-family-base);
  font-size: var(--fs-md);
  color: var(--color-text);
  background-color: var(--color-bg);
  border: var(--input-border-width) solid var(--color-border);
  border-radius: var(--input-border-radius);
  padding: var(--input-padding-top-bottom) var(--input-padding);
  transition: var(--input-transition);

  /* Consistent sizing */
  height: var(--input-height);
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  line-height: 1.5;

  &::placeholder {
    color: var(--color-text-tertiary);
    opacity: 0.7;
  }

  &:hover:not(:disabled) {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
  }

  &:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.15);
    transform: translateY(-2px);
  }

  &:focus-visible {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.15);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: var(--color-surface);
  }

  &:invalid:not(:placeholder-shown) {
    border-color: var(--color-cancel);
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
  }
}

/* ===== TEXTAREA SPECIFIC ===== */
textarea {
  height: auto;
  min-height: 100px;
  padding: var(--space-4);
  resize: vertical;
  line-height: 1.6;

  &:focus {
    min-height: 120px;
  }
}

/* ===== SELECT DROPDOWN ===== */
select {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2322c55e' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--space-3) center;
  padding-right: var(--space-10);
  cursor: pointer;

  &:hover:not(:disabled) {
    background-color: var(--color-surface-hover);
  }
}

/* ===== MATERIAL FORM FIELD OVERRIDES ===== */
.mat-mdc-form-field {
  .mat-mdc-form-field-infix {
    padding-top: 0;
    padding-bottom: 0;
  }

  .mat-mdc-text-field-wrapper {
    padding-bottom: 0;
  }

  /* Input wrapper */
  .mdc-text-field {
    --mdc-filled-text-field-container-color: var(--color-bg);
    --mdc-theme-primary: var(--color-primary);

    /* Outline */
    .mdc-notched-outline__leading,
    .mdc-notched-outline__notch,
    .mdc-notched-outline__trailing {
      border-width: 2px;
      border-color: var(--color-border);
      transition: all var(--transition-base);
    }

    &:hover:not(.mdc-text-field--disabled) {
      .mdc-notched-outline__leading,
      .mdc-notched-outline__notch,
      .mdc-notched-outline__trailing {
        border-color: var(--color-primary);
      }
    }

    &.mdc-text-field--focused {
      .mdc-notched-outline__leading,
      .mdc-notched-outline__notch,
      .mdc-notched-outline__trailing {
        border-color: var(--color-primary);
      }
    }
  }

  /* Label styling */
  .mat-mdc-form-field-label {
    color: var(--color-text-secondary);
    font-size: var(--fs-md);
    font-weight: var(--fw-medium);
  }

  /* Focus overlay */
  .mat-mdc-form-field-focus-overlay {
    background-color: transparent;
  }

  /* Error styling */
  &.mat-form-field-invalid {
    .mdc-notched-outline__leading,
    .mdc-notched-outline__notch,
    .mdc-notched-outline__trailing {
      border-color: var(--color-cancel) !important;
    }

    .mat-mdc-form-field-error {
      font-size: var(--fs-sm);
      color: var(--color-cancel);
      margin-top: var(--space-2);
    }
  }

  /* Hint styling */
  .mat-mdc-form-field-hint {
    font-size: var(--fs-sm);
    color: var(--color-text-tertiary);
    margin-top: var(--space-2);
  }
}

/* ===== CUSTOM INPUT COMPONENT ===== */
app-custom-input {
  width: 100%;
  max-width: 100%;
  display: block;

  input {
    &.input-focus {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.15);
    }

    &.input-error {
      border-color: var(--color-cancel);
      box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
    }
  }
}

/* ===== CUSTOM RADIO ===== */
.mat-mdc-radio-button {
  margin: var(--space-2) 0;

  &.mdc-radio--checked {
    --mdc-radio-selected-icon-color: var(--color-primary);
  }

  &:hover:not(.mat-mdc-radio-disabled) {
    --mdc-radio-unselected-icon-color: var(--color-primary);
  }
}

/* Required radio indicator */
.radio-required .mat-mdc-radio-button {
  --mdc-radio-unselected-icon-color: var(--color-cancel);

  &.mdc-radio--checked {
    --mdc-radio-selected-icon-color: var(--color-primary);
  }
}

/* ===== CUSTOM DATE PICKER ===== */
app-custom-date-picker {
  width: 100%;
  display: block;

  input {
    cursor: pointer;

    &:disabled {
      cursor: not-allowed;
    }
  }
}

/* ===== CUSTOM CHECKBOX ===== */
.mat-mdc-checkbox {
  &.mat-mdc-checkbox-checked {
    --mdc-checkbox-checked-checkmark-color: white;
    --mdc-checkbox-checked-focus-container-color: var(--color-primary);
  }

  &:hover:not(.mat-mdc-checkbox-disabled) {
    --mdc-checkbox-unselected-hover-state-layer-color: rgba(34, 197, 94, 0.08);
  }
}

/* ===== INPUT GROUP STYLES ===== */
.input-group {
  display: flex;
  gap: var(--space-3);
  align-items: center;

  &.input-group-vertical {
    flex-direction: column;
    gap: var(--space-4);

    > * {
      width: 100%;
    }
  }

  &.input-group-compact {
    gap: 0;

    > input:not(:last-child) {
      border-radius: var(--radius-lg) 0 0 var(--radius-lg);
    }

    > input:not(:first-child) {
      border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
    }
  }
}

/* ===== FOCUS ANIMATION ===== */
@keyframes inputFocus {
  0% {
    box-shadow: 0 0 0 0px rgba(34, 197, 94, 0.1);
  }
  50% {
    box-shadow: 0 0 0 6px rgba(34, 197, 94, 0.1);
  }
  100% {
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.15);
  }
}

input:focus,
textarea:focus,
select:focus {
  animation: inputFocus 200ms ease-out;
}

/* ===== RESPONSIVE INPUT SIZES ===== */
@media (max-width: 768px) {
  input,
  textarea,
  select {
    font-size: var(--fs-md);
    padding: var(--space-3) var(--space-3);
    height: 44px;
    border-radius: var(--radius-lg);
  }

  textarea {
    min-height: 80px;

    &:focus {
      min-height: 100px;
    }
  }

  .mat-mdc-form-field {
    width: 100%;
  }
}

@media (max-width: 480px) {
  input,
  textarea,
  select {
    font-size: var(--fs-md);
    height: 42px;
    padding: var(--space-2) var(--space-3);
  }

  .input-group {
    gap: var(--space-2);

    &.input-group-compact {
      flex-wrap: wrap;

      > input {
        flex: 1;
        min-width: 100px;
      }
    }
  }
}

/* ===== DARK MODE ADJUSTMENTS ===== */
[data-theme="dark"] {
  input,
  textarea,
  select {
    background-color: var(--color-surface);
    color: var(--color-text);
    border-color: var(--color-border);

    &::placeholder {
      color: var(--color-text-tertiary);
    }

    &:hover:not(:disabled) {
      background-color: var(--color-surface-hover);
      border-color: var(--color-primary-light);
    }

    &:focus {
      background-color: var(--color-surface-hover);
      border-color: var(--color-primary-light);
      box-shadow: 0 0 0 4px rgba(74, 222, 128, 0.15);
    }
  }

  select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%234ade80' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  }
}

/* ===== VALIDATION STATES ===== */
.input-valid {
  border-color: var(--color-success) !important;

  &:focus {
    box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.15) !important;
  }
}

.input-error {
  border-color: var(--color-cancel) !important;

  &:focus {
    box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.15) !important;
  }
}

.input-warning {
  border-color: var(--color-warning) !important;

  &:focus {
    box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.15) !important;
  }
}

/* ===== HELPER TEXT ===== */
.input-helper {
  font-size: var(--fs-sm);
  color: var(--color-text-tertiary);
  margin-top: var(--space-2);
  display: block;

  &.helper-error {
    color: var(--color-cancel);
  }

  &.helper-success {
    color: var(--color-success);
  }

  &.helper-warning {
    color: var(--color-warning);
  }
}

/* ===== LABEL STYLING ===== */
label {
  display: block;
  font-size: var(--fs-md);
  font-weight: var(--fw-medium);
  color: var(--color-text);
  margin-bottom: var(--space-2);
  cursor: pointer;
  transition: all var(--transition-base);

  &:hover {
    color: var(--color-primary);
  }

  &.required::after {
    content: ' *';
    color: var(--color-cancel);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
}

/* ===== INPUT ADDON STYLES ===== */
.input-addon {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 var(--space-3);
  color: var(--color-text-secondary);
  font-size: var(--fs-md);
  pointer-events: none;
}

.input-prefix {
  position: absolute;
  left: var(--space-3);
  z-index: 1;
}

.input-suffix {
  position: absolute;
  right: var(--space-3);
  z-index: 1;
  cursor: pointer;

  &:hover {
    color: var(--color-primary);
  }
}

/* ===== INPUT LOADING STATE ===== */
.input-loading {
  opacity: 0.6;
  cursor: wait;

  &::after {
    content: '';
    position: absolute;
    right: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    border: 2px solid var(--color-border);
    border-top-color: var(--color-primary);
    border-radius: 50%;
    animation: spin 600ms linear infinite;
  }
}

@keyframes spin {
  to {
    transform: translateY(-50%) rotate(360deg);
  }
}